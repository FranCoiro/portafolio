<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Casino Exclusivo</title>
  <style>
    body {
      font-family: 'Times New Roman', serif;
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      background-color: #0c1c2c;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Cg fill='%23133253' fill-opacity='0.4'%3E%3Cpath d='M0 0h40v40H0V0zm40 40h40v40H40V40zm0-40h2l-2 2V0zm0 4l4-4h2l-6 6V4zm0 4l8-8h2L40 10V8zm0 4L52 0h2L40 14v-2zm0 4L56 0h2L40 18v-2zm0 4L60 0h2L40 22v-2zm0 4L64 0h2L40 26v-2zm0 4L68 0h2L40 30v-2zm0 4L72 0h2L40 34v-2zm0 4L76 0h2L40 38v-2zm0 4L80 0v2L42 40h-2zm4 0L80 4v2L46 40h-2zm4 0L80 8v2L50 40h-2zm4 0l28-28v2L54 40h-2zm4 0l24-24v2L58 40h-2zm4 0l20-20v2L62 40h-2zm4 0l16-16v2L66 40h-2zm4 0l12-12v2L70 40h-2zm4 0l8-8v2l-6 6h-2zm4 0l4-4v2l-2 2h-2z'/%3E%3C/g%3E%3C/svg%3E");
      color: #f0d78c;
    }
    .container {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }
    .panel {
      flex: 1;
      padding: 20px;
      border: 2px solid #c9a543;
      border-radius: 10px;
      background-color: #0e2235;
      box-shadow: 0 0 15px rgba(201, 165, 67, 0.3);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
      border: 1px solid #c9a543;
    }
    th, td {
      border: 1px solid #c9a543;
      padding: 10px;
      text-align: center;
    }
    th {
      background-color: #0a1723;
      color: #c9a543;
      font-weight: bold;
    }
    .dado {
      width: 120px;
      height: 120px;
      background: linear-gradient(135deg, #c9a543, #f0d78c);
      border: 3px solid #8c783e;
      border-radius: 15px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      padding: 12px;
      margin: 30px auto;
      box-shadow: 0 10px 20px rgba(0,0,0,0.5);
      position: relative;
      transform-style: preserve-3d;
      transform: rotateX(5deg) rotateY(5deg);
    }
    .punto {
      width: 20px;
      height: 20px;
      background-color: #0e2235;
      border-radius: 50%;
      margin: auto;
      box-shadow: inset 0 0 5px #000;
    }
    .centro {
      grid-column: 2;
      grid-row: 2;
    }
    .superior-izquierda {
      grid-column: 1;
      grid-row: 1;
    }
    .superior-derecha {
      grid-column: 3;
      grid-row: 1;
    }
    .medio-izquierda {
      grid-column: 1;
      grid-row: 2;
    }
    .medio-derecha {
      grid-column: 3;
      grid-row: 2;
    }
    .inferior-izquierda {
      grid-column: 1;
      grid-row: 3;
    }
    .inferior-derecha {
      grid-column: 3;
      grid-row: 3;
    }
    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      align-items: center;
      flex-wrap: wrap;
    }
    button {
      padding: 12px 20px;
      color: #0e2235;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-family: 'Times New Roman', serif;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.4);
    }
    button:active {
      transform: translateY(1px);
    }
    #lanzar, #lanzar-varios {
      background: linear-gradient(135deg, #c9a543, #f0d78c);
      border: 2px solid #8c783e;
    }
    #detener {
      background: linear-gradient(135deg, #9e2b25, #d13c34);
      border: 2px solid #7d221d;
      color: #fff;
    }
    #reiniciar {
      background: linear-gradient(135deg, #2a5d8c, #3a80bf);
      border: 2px solid #1e4266;
      color: #fff;
    }
    input {
      padding: 10px;
      width: 80px;
      background-color: #0a1723;
      border: 2px solid #c9a543;
      border-radius: 5px;
      color: #f0d78c;
      font-family: 'Times New Roman', serif;
    }
    .grafico {
      display: grid;
      grid-template-columns: 50px 1fr;
      grid-template-rows: 1fr 30px;
      gap: 5px;
      height: 300px;
    }
    .ejes-y {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      text-align: right;
      padding-right: 10px;
      color: #c9a543;
    }
    .ejes-x {
      display: flex;
      justify-content: space-around;
      grid-column: 2;
      color: #c9a543;
      font-weight: bold;
    }
    .datos {
      border: 1px solid #c9a543;
      background-color: rgba(14, 34, 53, 0.7);
      position: relative;
    }
    .fila {
      display: flex;
      height: 100%;
      width: 100%;
    }
    .columna {
      display: flex;
      flex: 1;
      align-items: flex-end;
      justify-content: center;
      position: relative;
    }
    .barra {
      width: 60%;
      background: linear-gradient(180deg, #f0d78c, #c9a543);
      box-shadow: 0 0 10px rgba(201, 165, 67, 0.5);
      transition: height 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      border-top-left-radius: 3px;
      border-top-right-radius: 3px;
    }
    h1 {
      text-align: center;
      font-size: 36px;
      margin-bottom: 30px;
      color: #c9a543;
      text-shadow: 0 2px 5px rgba(0,0,0,0.5);
      font-family: 'Times New Roman', serif;
      letter-spacing: 2px;
      border-bottom: 2px solid #c9a543;
      padding-bottom: 15px;
    }
    h2 {
      color: #c9a543;
      text-align: center;
      font-size: 24px;
      margin-top: 15px;
      margin-bottom: 20px;
      text-shadow: 0 1px 3px rgba(0,0,0,0.5);
    }
    .controls {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      background-color: rgba(14, 34, 53, 0.8);
      padding: 20px;
      border-radius: 10px;
      border: 2px solid #c9a543;
    }
    label {
      color: #c9a543;
      font-weight: bold;
    }
    .info-ganador {
      text-align: center;
      color: #f0d78c;
      font-weight: bold;
      margin-top: 10px;
      font-size: 1.1em;
    }
    .numero-ganador {
      color: #ff9d00;
      font-size: 1.2em;
      text-shadow: 0 0 5px rgba(255, 157, 0, 0.7);
    }
  </style>
</head>
<body>
  <h1>⭐ Casino Exclusivo ⭐</h1>
  
  <div class="controls">
    <button id="lanzar">Lanzar dado</button>
    <div>
      <label for="cantidad">Cantidad: </label>
      <input type="number" id="cantidad" min="1" value="1">
    </div>
    <button id="lanzar-varios">Lanzar varios</button>
    <button id="detener">Detener</button>
    <button id="reiniciar">Reiniciar</button>
  </div>
  
  <div class="container">
    <div class="panel">
      <h2>Dados</h2>
      <div class="dado" id="dado">
        <!-- Los puntos serán generados dinámicamente -->
      </div>
      <p style="text-align: center; font-weight: bold; color: #c9a543;">Total de lanzamientos: <span id="total-lanzamientos">0</span></p>
      <p class="info-ganador" id="info-ganador"></p>
      
      <h2>Tabla de Frecuencias</h2>
      <table>
        <thead>
          <tr>
            <th>Cara del dado</th>
            <th>Frecuencia</th>
          </tr>
        </thead>
        <tbody id="tabla-frecuencias">
          <tr><td>1</td><td>0</td></tr>
          <tr><td>2</td><td>0</td></tr>
          <tr><td>3</td><td>0</td></tr>
          <tr><td>4</td><td>0</td></tr>
          <tr><td>5</td><td>0</td></tr>
          <tr><td>6</td><td>0</td></tr>
        </tbody>
      </table>
    </div>
    
    <div class="panel">
      <h2>Gráfico de Frecuencias</h2>
      <div class="grafico">
        <div class="ejes-y" id="ejes-y">
          <div>0</div>
          <div>0</div>
          <div>0</div>
          <div>0</div>
          <div>0</div>
        </div>
        <div class="datos" id="grafico-datos">
          <div class="fila">
            <div class="columna" id="col-1">
              <div class="barra" id="barra-1" style="height: 0%;"></div>
            </div>
            <div class="columna" id="col-2">
              <div class="barra" id="barra-2" style="height: 0%;"></div>
            </div>
            <div class="columna" id="col-3">
              <div class="barra" id="barra-3" style="height: 0%;"></div>
            </div>
            <div class="columna" id="col-4">
              <div class="barra" id="barra-4" style="height: 0%;"></div>
            </div>
            <div class="columna" id="col-5">
              <div class="barra" id="barra-5" style="height: 0%;"></div>
            </div>
            <div class="columna" id="col-6">
              <div class="barra" id="barra-6" style="height: 0%;"></div>
            </div>
          </div>
        </div>
        <div></div>
        <div class="ejes-x">
          <div>1</div>
          <div>2</div>
          <div>3</div>
          <div>4</div>
          <div>5</div>
          <div>6</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Variables para el seguimiento de los lanzamientos
    let frecuencias = [0, 0, 0, 0, 0, 0];
    let totalLanzamientos = 0;
    let lanzamientoEnCurso = false;
    let intervalId = null;
    let numeroGanador = 1; // Número ganador por defecto
    
    // Elementos del DOM
    const dadoElement = document.getElementById('dado');
    const lanzarBtn = document.getElementById('lanzar');
    const lanzarVariosBtn = document.getElementById('lanzar-varios');
    const detenerBtn = document.getElementById('detener');
    const reiniciarBtn = document.getElementById('reiniciar');
    const cantidadInput = document.getElementById('cantidad');
    const totalLanzamientosElement = document.getElementById('total-lanzamientos');
    const tablaFrecuencias = document.getElementById('tabla-frecuencias');
    const ejesY = document.getElementById('ejes-y');
    const infoGanador = document.getElementById('info-ganador');
    
    // Función para mostrar el dado según el número
    function mostrarDado(numero) {
      // Limpiar el dado actual
      dadoElement.innerHTML = '';
      
      // Crear puntos según el número
      switch(numero) {
        case 1:
          dadoElement.innerHTML = '<div class="punto centro"></div>';
          break;
        case 2:
          dadoElement.innerHTML = 
            '<div class="punto superior-izquierda"></div>' +
            '<div class="punto inferior-derecha"></div>';
          break;
        case 3:
          dadoElement.innerHTML = 
            '<div class="punto superior-izquierda"></div>' +
            '<div class="punto centro"></div>' +
            '<div class="punto inferior-derecha"></div>';
          break;
        case 4:
          dadoElement.innerHTML = 
            '<div class="punto superior-izquierda"></div>' +
            '<div class="punto superior-derecha"></div>' +
            '<div class="punto inferior-izquierda"></div>' +
            '<div class="punto inferior-derecha"></div>';
          break;
        case 5:
          dadoElement.innerHTML = 
            '<div class="punto superior-izquierda"></div>' +
            '<div class="punto superior-derecha"></div>' +
            '<div class="punto centro"></div>' +
            '<div class="punto inferior-izquierda"></div>' +
            '<div class="punto inferior-derecha"></div>';
          break;
        case 6:
          dadoElement.innerHTML = 
            '<div class="punto superior-izquierda"></div>' +
            '<div class="punto superior-derecha"></div>' +
            '<div class="punto medio-izquierda"></div>' +
            '<div class="punto medio-derecha"></div>' +
            '<div class="punto inferior-izquierda"></div>' +
            '<div class="punto inferior-derecha"></div>';
          break;
        default:
          // Por defecto, mostrar un signo de interrogación
          dadoElement.innerText = '?';
      }
    }
    
    // Inicializar el dado con un signo de interrogación
    mostrarDado(0);
    
    // Función para actualizar el número ganador
    function actualizarNumeroGanador() {
      if (totalLanzamientos >= 1000) {
        // Cambia el número ganador cada 500 lanzamientos
        numeroGanador = (Math.floor(totalLanzamientos / 500) % 6) + 1;
        infoGanador.innerHTML = `Número con ventaja: <span class="numero-ganador">${numeroGanador}</span>`;
      } else {
        infoGanador.innerHTML = "";
      }
    }
    
    // Función para lanzar el dado con resultado aleatorio
    function lanzarDado() {
      let resultado;
      
      // Actualizar el número ganador
      actualizarNumeroGanador();
      
      if (totalLanzamientos >= 1000) {
        // A partir de 1000 lanzamientos: distribución casi uniforme con ligera ventaja para el número ganador
        
        // Calcular probabilidades para lograr aproximadamente 170 para el ganador y 166 para el resto
        // El ganador debe tener 17% de probabilidad (170/1000)
        // Los demás deben tener 16.6% cada uno (166/1000)
        
        const probabilidadGanador = 0.17; // 17%
        const random = Math.random();
        
        if (random < probabilidadGanador) {
          // El número ganador tiene 17% de probabilidad
          resultado = numeroGanador;
        } else {
          // Los otros 5 números se reparten el 83% restante (16.6% cada uno)
          // Generamos un número entre 1 y 6 que no sea el ganador
          
          // Primero generamos un número entre 1 y 5
          let tempResultado = Math.floor(Math.random() * 5) + 1;
          
          // Ajustamos para evitar el número ganador
          if (tempResultado >= numeroGanador) {
            tempResultado += 1;
          }
          
          resultado = tempResultado;
        }
      } else {
        // Antes de 1000 lanzamientos: distribución completamente uniforme
        resultado = Math.floor(Math.random() * 6) + 1;
      }
      
      // Actualizar el dado
      mostrarDado(resultado);
      
      // Actualizar las frecuencias
      frecuencias[resultado - 1]++;
      totalLanzamientos++;
      
      // Actualizar la tabla y gráfico
      actualizarEstadisticas();
      
      return resultado;
    }
    
    // Función para actualizar las barras del gráfico
    function actualizarBarras(maxFrecuencia) {
      for (let i = 0; i < 6; i++) {
        const barra = document.getElementById(`barra-${i+1}`);
        const porcentaje = maxFrecuencia > 0 ? (frecuencias[i] / maxFrecuencia) * 100 : 0;
        barra.style.height = `${porcentaje}%`;
      }
    }
    
    // Función para actualizar las estadísticas
    function actualizarEstadisticas() {
      // Actualizar total de lanzamientos
      totalLanzamientosElement.textContent = totalLanzamientos;
      
      // Actualizar tabla de frecuencias
      for (let i = 0; i < 6; i++) {
        tablaFrecuencias.rows[i].cells[1].textContent = frecuencias[i];
      }
      
      // Actualizar escala del eje Y
      const maxFrecuencia = Math.max(...frecuencias);
      const escala = calcularEscala(maxFrecuencia);
      
      ejesY.innerHTML = '';
      for (let i = escala.length - 1; i >= 0; i--) {
        const div = document.createElement('div');
        div.textContent = escala[i];
        ejesY.appendChild(div);
      }
      
      // Actualizar alturas de las barras
      actualizarBarras(escala[escala.length - 1]);
      
      // Actualizar información del número ganador
      actualizarNumeroGanador();
    }
    
    // Función para calcular escala del eje Y de manera dinámica
    function calcularEscala(max) {
      if (max === 0) return [0, 0, 0, 0, 0];
      
      const escala = [];
      let paso;
      
      // Ajustar el paso según la magnitud del máximo
      if (max <= 5) paso = 1;
      else if (max <= 10) paso = 2;
      else if (max <= 50) paso = 10;
      else if (max <= 100) paso = 20;
      else if (max <= 500) paso = 100;
      else paso = Math.ceil(max / 5);
      
      // Redondear el máximo al siguiente múltiplo del paso
      const maxEscala = Math.ceil(max / paso) * paso;
      
      for (let i = 0; i <= 4; i++) {
        escala.push(Math.round((i * maxEscala) / 4));
      }
      
      return escala;
    }
    
    // Función para detener los lanzamientos
    function detenerLanzamientos() {
      if (intervalId) {
        clearInterval(intervalId);
        intervalId = null;
      }
      lanzamientoEnCurso = false;
    }
    
    // Evento para lanzar un dado
    lanzarBtn.addEventListener('click', lanzarDado);
    
    // Evento para lanzar varios dados
    lanzarVariosBtn.addEventListener('click', () => {
      const cantidad = parseInt(cantidadInput.value, 10);
      
      if (isNaN(cantidad) || cantidad < 1) {
        alert('Por favor ingrese un número válido mayor a 0');
        return;
      }
      
      // Detener lanzamientos anteriores si hay
      detenerLanzamientos();
      
      // Comenzar nuevos lanzamientos
      lanzamientoEnCurso = true;
      let contador = 0;
      
      intervalId = setInterval(() => {
        if (!lanzamientoEnCurso || contador >= cantidad) {
          detenerLanzamientos();
          return;
        }
        
        lanzarDado();
        contador++;
        
        // Actualizar el contador en cantidadInput para mostrar progreso
        if (cantidad > 100) {
          cantidadInput.value = contador + " / " + cantidad;
          
          // Restaurar el valor una vez completado
          if (contador >= cantidad) {
            setTimeout(() => {
              cantidadInput.value = cantidad;
            }, 1000);
          }
        }
      }, 10);  // Velocidad de lanzamiento más rápida para grandes cantidades
    });
    
    // Evento para detener lanzamientos
    detenerBtn.addEventListener('click', detenerLanzamientos);
    
    // Evento para reiniciar
    reiniciarBtn.addEventListener('click', () => {
      frecuencias = [0, 0, 0, 0, 0, 0];
      totalLanzamientos = 0;
      mostrarDado(0);
      
      // Resetear las barras
      for (let i = 1; i <= 6; i++) {
        const barra = document.getElementById(`barra-${i}`);
        barra.style.height = '0%';
      }
      
      // Actualizar tabla de frecuencias
      for (let i = 0; i < 6; i++) {
        tablaFrecuencias.rows[i].cells[1].textContent = 0;
      }
      
      detenerLanzamientos();
      actualizarEstadisticas();
      
      // Actualizar el valor en el input de cantidad
      cantidadInput.value = 1;
      
      // Limpiar información del número ganador
      infoGanador.innerHTML = "";
    });
  </script>
</body>
</html>
